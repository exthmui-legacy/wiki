{% assign device = site.data.devices[page.device] %}
{% include alerts/specific/note_autogenerated.html %}

## 简介

这些说明希望能帮助你的 {{ device.vendor }} {{ device.name }}, 解锁 Bootloader (如果需要的话), 然后为您的设备下载所需的工具，以及 exTHmUI 的最新源码 (基于 Google 的 Android)。使用这些，你可以编译一个 exTHmUI 安装包和一个 exTHmUI Recovery，并将它们安装在你的设备上。

很难说编译 exTHmUI 需要多少经验。本指南肯定不适合一点都不懂人，但这些步骤也不是专门写给开发大佬的。有些人可能不会绝对有任何困难，可以轻松完成这些步骤。另一些人可能会在最基本的操作上困惑。

记住，你要承担编译的所有风险，但如果成功的话，你会感觉自己很满足。
而且你一旦学会编译 Android，你不需要等待任何官方版本，你可以随时从源码中编译一个完整的操作系统并将其安装到自己的设备上。

你将何去何从？也许你会增加一个功能，修复一个 Bug，增加一个翻译，或者利用你所学到的知识来写一个新应用或适配一个新设备上。也许你永远不会再编译。这一切取决于你。

{% include templates/device_build_before_init.md %}

### 同步 exTHmUI 源码

{% if device.maintainers != empty %}
以下是 {{ device.vendor }} {{ device.name }} 官方支持的分支:
{% else %}
以下分支可用于为 {{ device.vendor }} {{ device.name }} 编译:
{% endif %}

{% for version in device.versions %}
* exthm-{{ version }}
{% endfor %}

{% assign current_branch = device.current_branch %}
{% include templates/device_build_init_sync.md %}

### 准备设备专用代码

在源码同步完成后，确保你在源码的根目录下 (`cd ~/android/lineage`), 然后运行:

```
source build/envsetup.sh
breakfast {{ device.codename }}
```

这会自动下载 [Device Tree](https://github.com/LineageOS/{{ device.tree }}) 和 [Kernel Tree](https://github.com/LineageOS/{{ device.kernel }}).

{% include alerts/important.html content="一些设备要求在 `breakfast` 前存在 Vendor Tree。如果需要了关于 Vendor Makefile 的错误，请转到[_提取专有二进制文件_](#extract-proprietary-blobs)。提取完成后再[重新运行`breakfast`](#prepare-the-device-specific-code)" %}

### 提取专有二进制文件

{% capture extracting_blobs_from_zips %}
这一步需要有一个已经运行你需要编译版本的 exTHmUI 的设备，如果您无法完成此步骤，请转到[从 zip 包中提取专有二进制文件]({{ "extracting_blobs_from_zips.html" | relative_url }}).
{% endcapture %}
{% include alerts/note.html content=extracting_blobs_from_zips %}

确保你的 {{ device.name }} 已经通过 USB 连接到计算机, 且 ADB 和 ROOT 已经开启, 且在 `~/android/lineage/device/{{ device.vendor_short }}/{{ device.codename }}` 目录下。然后运行 `extract-files.sh` 脚本:

```
./extract-files.sh
```

专有二进制文件会被提取到 `~/android/lineage/vendor/{{ device.vendor_short }}` 目录。如果你遇到 "command not found" 的错误, 则 `adb` 需要放到 `~/bin`.


### 开始编译

是时候开始编译了，运行:

```
croot
brunch {{device.codename}}
```

现在编译应该开始了。

{% capture signing_builds %}
想要对你的编译签名？来看看[签名编译]({{ "signing_builds.html" | relative_url }}).
{% endcapture %}
{% include alerts/tip.html content=signing_builds %}

## 编译完成

假设编译完成后没有错误（完成后会很明显），在编译运行的终端窗口中输入以下内容：

```
cd $OUT
```

在这个目录你会发现所有被编译出来的文件。最重要的的两个文件是:

{% if device.is_ab_device %}
1. `boot.img`, 这是 exTHmUI 的启动镜像, 并包含 Recovery。
{% else %}
1. `recovery.img`, 这是 exTHmUI 的 Recovery。
{% endif %}
2. `exthm-{{ device.current_branch }}.0-{{ site.time | date: "%Y%m%d" }}-NUCLEAR-SNAPSHOT-{{ device.codename }}.zip`, 这是 exTHmUI 的安装包
